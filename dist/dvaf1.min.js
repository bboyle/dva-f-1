/*! dva-f-1 - v1.0.0 - 2016-04-22
* https://github.com/bboyle/dva-f-1#readme
* Copyright (c) 2016 Queensland Government; Licensed BSD-3-Clause */
$(function(a){"use strict";function b(a){return/^true|false$/.test(a)?"true"===a:a}var c=window.dvaf1Data={selected:{}},d=a("#dvaf1-form-view");d.on("change",function(d){var e=a(d.target),f=d.target.name,g=b(a(d.target).val());c[f]=g,e.is("select,:radio,:checkbox")&&(e.is(":checkbox")?c.selected[f][g]=d.target.checked:(c.selected[f]={},c.selected[f][g]=!0))})}),$(function(){"use strict";Handlebars.registerHelper("doesTheAggrieved",function(){return dvaf1Data.userIsAggrieved?"do you":dvaf1Data.userRelationship?"someone"===dvaf1Data.userRelationship?"do they":"does your "+dvaf1Data.userRelationship:"does the aggrieved"}),Handlebars.registerHelper("TheAggrievedIs",function(){return dvaf1Data.userIsAggrieved?"You are":dvaf1Data.userRelationship?"someone"===dvaf1Data.userRelationship?"They are":"Your "+dvaf1Data.userRelationship+" is":"The aggrieved is"})}),$(function(a){"use strict";function b(b,c){return"*"===c.values&&(c.values=a.map(a(b.find("form").get(0).elements[c.name]).find("option"),function(a){return a.value?a.value:null})),c}function c(c){var e=f[g[c]];d.html(a(e.template(dvaf1Data))),a.each(e.relevance,function(c,e){a.isArray(e)?a.each(e,function(a,e){d.find(c).relevance("relevantWhen",b(d,e))}):d.find(c).relevance("relevantWhen",b(d,e))})}var d=a("#dvaf1-form-view"),e={dfnAggrieved:{id:"dvaf1-dfn-aggrieved-partial"}},f={formPreamble:{id:"dvaf1-preamble-template",relevance:{"#dvaf1-legal-advice":{name:"legalAdvice",value:"How do I get legal advice?"}}},formSituation:{id:"dvaf1-situation-template",relevance:{"#dvaf1-dfn-aggrieved":[{name:"userIsAggrieved",value:"true"},{name:"userRelationship",values:"*"}],"#dvaf1-user-relationship-placeholder":{name:"userIsAggrieved",value:"false",negate:!0},"#dvaf1-user-relationship":{name:"userIsAggrieved",value:"false"}}},formAggrievedBasic:{id:"dvaf1-aggrieved-basic-template"},formRespondentBasic:{id:"dvaf1-respondent-basic-template"},formRelationship:{id:"dvaf1-relationship-template"},formGrounds:{id:"dvaf1-grounds-template"},formConditions:{id:"dvaf1-conditions-template"},formUrgent:{id:"dvaf1-urgent-template"},formAggrieved:{id:"dvaf1-aggrieved-template"},formChildren:{id:"dvaf1-children-template"},formAssociates:{id:"dvaf1-associates-template"},formRespondent:{id:"dvaf1-respondent-template"},formOrders:{id:"dvaf1-orders-template"},formApplicant:{id:"dvaf1-applicant-template"},formCourt:{id:"dvaf1-court-template"},formDownload:{id:"dvaf1-download-template"}},g=[],h=0;a.each(e,function(b,c){var d=a("#"+c.id).remove();return d.length?(c.template=Handlebars.compile(d.html()),Handlebars.registerPartial(b,c.template),c):void delete e[b]}),a.each(f,function(b,c){var d=a("#"+c.id).remove();return d.length?(c.template=Handlebars.compile(d.html()),g.push(b),c):void delete f[b]}),d.on("submit",function(a){a.preventDefault(),h++,g[h]?c(h):a.target.action&&window.location.replace(a.target.action)}),d.on("change",function(b){var c=a(b.target),d=b.target.name;if(c.is("select,:radio,:checkbox"))switch(d){case"userIsAggrieved":case"userRelationship":a("#dvaf1-dfn-aggrieved").html(e.dfnAggrieved.template(dvaf1Data))}}),c(h)});