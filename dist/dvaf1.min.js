/*! dva-f-1 - v1.0.0 - 2016-04-22
* https://github.com/bboyle/dva-f-1#readme
* Copyright (c) 2016 Queensland Government; Licensed BSD-3-Clause */
$(function(a){"use strict";function b(a){return/^true|false$/.test(a)?"true"===a:a}var c=window.dvaf1Data={selected:{}},d=a("#dvaf1-form-view");d.on("change",function(d){var e=a(d.target),f=d.target.name,g=b(a(d.target).val());c[f]=g,e.is("select,:radio,:checkbox")&&(e.is(":checkbox")?c.selected[f][g]=d.target.checked:(c.selected[f]={},c.selected[f][g]=!0))})}),$(function(){"use strict";Handlebars.registerHelper("doesTheAggrieved",function(){return dvaf1Data.userIsAggrieved?"do you":dvaf1Data.aggrievedNameGiven?"does "+dvaf1Data.aggrievedNameGiven:dvaf1Data.userRelationship?"someone"===dvaf1Data.userRelationship?"do they":"does your "+dvaf1Data.userRelationship:"does the aggrieved"}),Handlebars.registerHelper("TheAggrievedIs",function(){return dvaf1Data.userIsAggrieved?"You are":dvaf1Data.userRelationship?"someone"===dvaf1Data.userRelationship?"They are":"Your "+dvaf1Data.userRelationship+" is":"The aggrieved is"})}),$(function(a){"use strict";function b(b,c){return"*"===c.values&&(c.values=a.map(a(b.find("form").get(0).elements[c.name]).find("option"),function(a){return a.value?a.value:null})),c}function c(c){var d=g[h[c]];i=c,e.html(a(d.template(dvaf1Data))),a.each(d.relevance,function(c,d){a.isArray(d)?a.each(d,function(a,d){e.find(c).relevance("relevantWhen",b(e,d))}):e.find(c).relevance("relevantWhen",b(e,d))})}function d(b){a("#"+b).html(f[b].template(dvaf1Data))}var e=a("#dvaf1-form-view"),f={"dvaf1-dfn-aggrieved":{name:"dfnAggrieved"}},g={"dvaf1-preamble-template":{relevance:{"#dvaf1-legal-advice":{name:"legalAdvice",value:"How do I get legal advice?"}}},"dvaf1-situation-template":{relevance:{"#dvaf1-dfn-aggrieved":[{name:"userIsAggrieved",value:"true"},{name:"userRelationship",values:"*"}],"#dvaf1-user-relationship-placeholder":{name:"userIsAggrieved",value:"false",negate:!0},"#dvaf1-user-relationship":{name:"userIsAggrieved",value:"false"}}},"dvaf1-aggrieved-basic-template":{},"dvaf1-respondent-basic-template":{},"dvaf1-relationship-template":{},"dvaf1-grounds-template":{},"dvaf1-conditions-template":{},"dvaf1-urgent-template":{},"dvaf1-aggrieved-template":{},"dvaf1-children-template":{},"dvaf1-associates-template":{},"dvaf1-respondent-template":{},"dvaf1-orders-template":{},"dvaf1-applicant-template":{},"dvaf1-court-template":{},"dvaf1-download-template":{}},h=[],i=0;a.each(f,function(b,c){var d=a("#"+b+"-partial").remove();return d.length?(c.template=Handlebars.compile(d.html()),Handlebars.registerPartial(c.name,c.template),c):void delete f[b]}),a.each(g,function(b,c){var d=a("#"+b).remove();return d.length?(c.template=Handlebars.compile(d.html()),h.push(b),c):void delete g[b]}),e.on("submit",function(a){a.preventDefault(),h[i+1]?c(i+1):a.target.action&&window.location.replace(a.target.action)}),a(document).on("click","a",function(a){var b=a.target.href.split("#");b.length>1&&/^dvaf1/.test(b[1])&&(b=h.indexOf(b[1]),-1!==b&&(a.preventDefault(),c(b)))}),e.on("change",function(b){var c=a(b.target),e=b.target.name;if(c.is("select,:radio,:checkbox"))switch(e){case"userIsAggrieved":case"userRelationship":d("dvaf1-dfn-aggrieved")}}),c(i)});